(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(a,t,l){},17:function(a,t,l){},19:function(a,t,l){"use strict";l.r(t);for(var u=l(0),g=l.n(u),f=l(3),i=l.n(f),r=(l(15),l(4)),S=l(5),v=l(7),h=l(6),s=l(8),w=l(1),b=(l(17),function(){var a,t,l,u,g,f,i,r="W",S="E";function v(a,t,l){for(var u=t.col<l.col?1:-1,g=t.col;g!==l.col;g+=u)a[t.row][g]=S}function h(a,t,l){for(var u=t.row<l.row?1:-1,g=t.row;g!==l.row;g+=u)a[g][t.col]=S}function s(a,t,l){var u=Math.floor(2*Math.random());if(t.row>l.row&&t.col>l.col)if(u){for(var g=t.row-1;g>=l.row+l.h-1;g--)a[g][t.col]=S;for(g=t.col-1;g>=l.col+l.w;g--)a[l.row+l.h-1][g]=S}else{for(g=t.col-1;g>=l.col+l.w-1;g--)a[t.row][g]=S;for(g=t.row-1;g>=l.row+l.h;g--)a[g][l.col+l.w-1]=S}else{if(!(t.row>l.row&&t.col<l.col))return!1;if(u){for(g=t.row-1;g>=l.row+l.h-1;g--)a[g][t.col+t.w-1]=S;for(g=t.col+t.w;g<l.col;g++)a[l.row+l.h-1][g]=S}else{for(g=t.col+t.w;g<=l.col;g++)a[t.row][g]=S;for(g=t.row-1;g>=l.row+l.h;g--)a[g][l.col]=S}}return!0}function w(a,t,l){t.row>=l.row&&t.row<l.row+l.h?v(a,t,l):l.row>=t.row&&l.row<t.row+t.h?v(a,l,t):t.col>=l.col&&t.col<l.col+l.w?h(a,t,l):l.col>=t.col&&l.col<t.col+t.w?h(a,l,t):s(a,t,l)||s(a,l,t)}function b(a,t){return t===a?t:a+2*Math.floor(Math.random()*Math.floor((t-a)/2+1))}function c(f){var i=void 0,v=b(t,a),h=b(t,a),s={h:v,w:h,row:b(0,l-v-2*g)+g,col:b(0,u-h-2*g)+g};if(function(a,t){for(var l=!0,u=t.row-1;u<t.row+t.h+1;u++)for(var g=t.col-1;g<t.col+t.w+1;g++)if(a[u][g]!==r){l=!1;break}return l}(f,s)){for(var w=s.row;w<s.row+s.h;w++)for(var c=s.col;c<s.col+s.w;c++)f[w][c]=S;i=s}return i}var O={generate:function(S){var v=S||{};l=v.rows||31,u=v.cols||51,a=v.maxRoomSize||7,t=v.minRoomSize||3,g=v.padding||2,f=v.maxAttempts||500,i=v.rooms||15;for(var h=[],s=0;s<l;s++){for(var b=[],O=0;O<u;O++)b.push(r);h.push(b)}var N=[],j=[];for(s=0,b=0;s<f&&b<i;){var B=c(h);B&&(N.push(B),b++),s++}function n(a,t){var l=t.row-a.row^t.col-a.col+2^2;return Math.sqrt(l)}for(j.push(N.pop());N.length;){var I=j[j.length-1],x=N.sort(function(a,t){return n(I,a)<n(I,t)?1:n(I,a)>n(I,t)?-1:0}).pop();w(h,I,x),j.push(x),I=x}return h.map(function(a,t){return a.map(function(a,t){return{cellType:a===r?"wall":"empty"}})})}};return O}()),c=[{hp:50,attack:15},{hp:75,attack:45},{hp:100,attack:60},{hp:150,attack:80}],O=[["Fist",25],["Hammer",50],["Sword",80],["Fire",100]],N=b.generate({maxRoomSize:7,minRoomSize:5,padding:2,rooms:27,rows:50,cols:30}),j=new Array(50),B=new Array(50),n=!1,I=0,x=0;x<j.length;x++){j[x]=new Array(30).fill(0),B[x]=new Array(30).fill(0);for(var C=0;C<j[x].length;C++)x%2!==0&&Math.random()<.03&&"empty"===N[x][C].cellType?(j[x][C]=1,I++,x>28&&!n&&(j[x][C]=3,console.log(x,C),n=!0)):Math.random()<.005&&"empty"===N[x][C].cellType&&0===j[x][C]&&(B[x][C]=1)}for(var R=new Array(50),z=0;z<R.length;z++){R[z]=new Array(30).fill(0);for(var T=0;T<R[z].length;T++)Math.random()<.01&&0===j[z][T]&&0===B[z][T]&&(Math.random()<.3?R[z][T]=1:Math.random()<.2?R[z][T]=2:Math.random()<.1&&(R[z][T]=3))}console.log(j),console.log(N);var F=function(a){function t(a){var l;return Object(r.a)(this,t),(l=Object(v.a)(this,Object(h.a)(t).call(this,a))).state={posX:Math.round(30*Math.random()),posY:Math.round(50*Math.random()),hp:100,xp:25,positions:j,hpotions:B,weapons:R,enemyCount:I,enemyDir:null,enemyHp:null,enemyAttack:null,weaponLevel:0,enemyLevel:null,fightOn:!1,gameWon:!1,mssg:null},l.handleTravel=l.handleTravel.bind(Object(w.a)(Object(w.a)(l))),l.detectEnemy=l.detectEnemy.bind(Object(w.a)(Object(w.a)(l))),l.handleCombat=l.handleCombat.bind(Object(w.a)(Object(w.a)(l))),l}return Object(s.a)(t,a),Object(S.a)(t,[{key:"componentDidMount",value:function(){var a,t;document.addEventListener("keydown",function(a){a.preventDefault(),39===a.keyCode?document.getElementById("Yplus").click():40===a.keyCode?document.getElementById("Xplus").click():37===a.keyCode?document.getElementById("Yminus").click():38===a.keyCode&&document.getElementById("Xminus").click()}),this.setState({positions:j,hpotions:B});for(var l=0;l<30;l++)for(var u=0;u<50;u++)Math.random()<.2&&!a&&!t&&"empty"===N[u][l].cellType&&0===j[l][u]&&0===this.state.weapons[l][u]&&0===B[l][u]&&(a=l,t=u);this.setState({posX:a,posY:t,enemyCount:I})}},{key:"detectEnemy",value:function(a,t){var l=this.state.positions;return a+1<=49&&0!==l[a+1][t]?(3===l[a+1][t]&&this.setState({mssg:"BOSSS FIGHT !!!!"}),this.setState({mssg:"Enemy to the right"}),this.setState({fightOn:!0}),{enemyDir:"right",enemyLevel:l[a+1][t],enemyHp:c[l[a+1][t]].hp,enemyAttack:c[l[a+1][t]].attack}):t+1<=29&&0!==l[a][t+1]?(3===l[a][t+1]&&this.setState({mssg:"BOSSS FIGHT !!!!"}),this.setState({mssg:"Enemy to the down"}),this.setState({fightOn:!0}),{enemyDir:"down",enemyLevel:l[a][t+1],enemyHp:c[l[a][t+1]].hp,enemyAttack:c[l[a][t+1]].attack}):a-1>=0&&0!==l[a-1][t]?(3===l[a-1][t]&&this.setState({mssg:"BOSSS FIGHT !!!!"}),this.setState({mssg:"Enemy to the left"}),this.setState({fightOn:!0}),{enemyDir:"left",enemyLevel:l[a-1][t],enemyHp:c[l[a-1][t]].hp,enemyAttack:c[l[a-1][t]].attack}):t-1>=0&&0!==l[a][t-1]?(3===l[a][t-1]&&this.setState({mssg:"BOSSS FIGHT !!!!"}),this.setState({mssg:"Enemy to the up"}),this.setState({fightOn:!0}),{enemyDir:"up",enemyLevel:l[a][t-1],enemyHp:c[l[a][t-1]].hp,enemyAttack:c[l[a][t-1]].attack}):(console.log("from inside the detectEnemy",this.state.fightOn),"clear")}},{key:"handleTravel",value:function(a){a.preventDefault();var t=this.state,l=t.positions,u=t.hpotions,g=t.weapons;if(null!==this.state.enemyDir||this.state.gameWon||0===this.state.hp)this.handleCombat(a);else{var f=this.state,i=f.posX,r=f.posY;if("Yplus"===a.target.id){if(r<49&&"empty"===N[r+1][i].cellType&&0===l[r+1][i]){if("object"===typeof this.detectEnemy(r+1,i)){var S=this.detectEnemy(r+1,i),v=S.enemyDir,h=S.enemyLevel,s=S.enemyAttack,w=S.enemyHp;this.setState({enemyDir:v,enemyLevel:h,enemyAttack:s,enemyHp:w})}else this.setState({fightOn:!1});var b=this.state.hp;1===u[r+1][i]&&(this.setState({hp:b+=65}),this.setState({mssg:"potion collected"})),0!==g[r+1][i]&&(this.setState({weaponLevel:g[r+1][i]}),this.setState({mssg:"picked a ".concat(O[g[r+1][i]][0])}));var c=u.slice(0);c[r+1][i]=0;var j=g.slice(0);j[r+1][i]=0,this.setState({posY:r+1,hpotions:c,weapons:j})}}else if("Xplus"===a.target.id){if(i<29&&"empty"===N[r][i+1].cellType&&0===l[r][i+1]){if("object"===typeof this.detectEnemy(r,i+1)){var B=this.detectEnemy(r,i+1),n=B.enemyDir,I=B.enemyLevel,x=B.enemyAttack,C=B.enemyHp;this.setState({enemyDir:n,enemyLevel:I,enemyAttack:x,enemyHp:C})}else this.setState({fightOn:!1});var R=this.state.hp;1===u[r][i+1]&&(this.setState({hp:R+=65}),this.setState({mssg:"potion collected"})),0!==g[r][i+1]&&(this.setState({weaponLevel:g[r][i+1]}),this.setState({mssg:"picked a ".concat(O[g[r][i+1]][0])}));var z=u.slice(0);z[r][i+1]=0;var T=g.slice(0);T[r][i+1]=0,this.setState({posX:i+1,hpotions:z,weapons:T})}}else if("Yminus"===a.target.id){if(r>0&&"empty"===N[r-1][i].cellType&&0===l[r-1][i]){if("object"===typeof this.detectEnemy(r-1,i)){var F=this.detectEnemy(r-1,i),G=F.enemyDir,U=F.enemyLevel,J=F.enemyAttack,q=F.enemyHp;this.setState({enemyDir:G,enemyLevel:U,enemyAttack:J,enemyHp:q})}else this.setState({fightOn:!1});var K=this.state.hp;1===u[r-1][i]&&(this.setState({hp:K+=65}),this.setState({mssg:"potion collected"})),0!==g[r-1][i]&&(this.setState({weaponLevel:g[r-1][i]}),this.setState({mssg:"picked a ".concat(O[g[r-1][i]][0])}));var Q=u.slice(0);Q[r-1][i]=0;var V=g.slice(0);V[r-1][i]=0,this.setState({posY:r-1,hpotions:Q,weapons:V})}}else if(i>0&&"empty"===N[r][i-1].cellType&&0===l[r][i-1]){if("object"===typeof this.detectEnemy(r,i-1)){var Z=this.detectEnemy(r,i-1),W=Z.enemyDir,k=Z.enemyLevel,D=Z.enemyAttack,o=Z.enemyHp;this.setState({enemyDir:W,enemyLevel:k,enemyAttack:D,enemyHp:o})}else this.setState({fightOn:!1});var L=this.state.hp;1===u[r][i-1]&&(this.setState({hp:L+=65}),this.setState({mssg:"potion collected"})),0!==g[r][i-1]&&(this.setState({weaponLevel:g[r][i-1]}),this.setState({mssg:"picked a ".concat(O[g[r][i-1]][0])}));var M=u.slice(0);M[r][i-1]=0;var P=g.slice(0);P[r][i-1]=0,this.setState({posX:i-1,hpotions:M,weapons:P})}}}},{key:"handleCombat",value:function(a){var t=this.state,l=t.hp,u=t.xp,g=t.enemyLevel,f=t.weaponLevel,i=t.enemyDir,r=t.enemyHp,S=t.enemyAttack,v=t.enemyCount,h=t.posY,s=t.posX,w=O[f][1];if("right"===i&&"Yplus"===a.target.id)if(l=l-S>=0?l-S:0,u+=5*g,0===(r=r-w>=0?r-w:0)){3===j[h+1][s]&&(this.setState({mssg:"Boss EXTERMINATED !!!"}),this.setState({gameWon:!0}));var b=this.state.positions.slice(0);b[h+1][s]=0,this.setState({positions:b,enemyCount:v-1}),this.setState({enemyDir:null,enemyHp:null,enemyAttack:null,enemyLevel:null})}else this.setState({enemyHp:r,hp:l,xp:u});else if("left"===i&&"Yminus"===a.target.id){if(l=l-S>=0?l-S:0,u+=5*g,0===(r=r-w>=0?r-w:0)){3===j[h-1][s]&&(this.setState({mssg:"Boss EXTERMINATED !!!"}),this.setState({gameWon:!0}));var c=this.state.positions.slice(0);c[h-1][s]=0,this.setState({positions:c,enemyCount:v-1}),this.setState({enemyDir:null,enemyHp:null,enemyAttack:null,enemyLevel:null})}this.setState({enemyHp:r,hp:l,xp:u})}else if("up"===i&&"Xminus"===a.target.id){if(l=l-S>=0?l-S:0,u+=5*g,0===(r=r-w>=0?r-w:0)){3===j[h][s-1]&&(this.setState({mssg:"Boss EXTERMINATED !!!"}),this.setState({gameWon:!0}));var N=this.state.positions.slice(0);N[h][s-1]=0,this.setState({positions:N,enemyCount:v-1}),this.setState({enemyDir:null,enemyHp:null,enemyAttack:null,enemyLevel:null})}this.setState({enemyHp:r,hp:l,xp:u})}else if("down"===i&&"Xplus"===a.target.id){if(l=l-S>=0?l-S:0,u+=5*g,0===(r=r-w>=0?r-w:0)){3===j[h][s+1]&&(this.setState({mssg:"Boss EXTERMINATED !!!"}),this.setState({gameWon:!0}));var B=this.state.positions.slice(0);B[h][s+1]=0,this.setState({positions:B,enemyCount:v-1}),this.setState({enemyDir:null,enemyHp:null,enemyAttack:null,enemyLevel:null})}this.setState({enemyHp:r,hp:l,xp:u})}}},{key:"render",value:function(){var a=this;0===this.state.hp?alert("Game Over"):!0===this.state.gameWon&&alert("YOU WON !!!!!!");for(var t=this.state,l=t.posX,u=t.posY,f=t.positions,i=t.hpotions,r=t.weapons,S=[],v=0;v<30;v++)for(var h=0;h<50;h++){var s=f[h][v],w=i[h][v],b=r[h][v];S.push(g.a.createElement(G,{meX:v,meY:h,posX:l,posY:u,thugP:s,potionP:w,weaponL:b}))}return this.state.mssg&&setTimeout(function(){return a.setState({mssg:null})},3e3),g.a.createElement("div",null,g.a.createElement("h1",{style:{color:"gainsboro",textAlign:"center",margin:"0",padding:"3px"}},"Dungeon Kings"),g.a.createElement("div",{className:"display-section"},g.a.createElement("div",{className:"statsbar"},g.a.createElement("span",null,g.a.createElement("span",{style:{fontSize:"13px"}},"HP"),this.state.hp),g.a.createElement("span",null,g.a.createElement("span",{style:{fontSize:"13px"}},"XP"),this.state.xp),g.a.createElement("span",null,g.a.createElement("span",{style:{fontSize:"13px"}},"Attack"),O[this.state.weaponLevel][1]),g.a.createElement("span",{style:{color:"coral",fontWeight:"bold",paddingTop:"30px"}},this.state.enemyCount)),g.a.createElement("div",{className:"actionbar"},this.state.enemyLevel?g.a.createElement("div",null,g.a.createElement("span",null,g.a.createElement("span",{style:{fontSize:"13px"}},"L"),this.state.enemyLevel),g.a.createElement("span",null,g.a.createElement("span",{style:{fontSize:"13px"}},"HP"),this.state.enemyHp," "),g.a.createElement("span",null,g.a.createElement("span",{style:{fontSize:"13px"}},"Attack"),this.state.enemyAttack," ")):null)),g.a.createElement("div",{className:"container-wrapper"},g.a.createElement("div",{className:"container",style:{position:"relative",right:"".concat(30*(this.state.posY-5),"px"),bottom:"".concat(30*(this.state.posX-5),"px")}},S)),g.a.createElement("div",{className:"navigation"},g.a.createElement("button",{id:"Yminus",className:"dirButton",onClick:this.handleTravel},"\u21e6"),g.a.createElement("button",{id:"Xminus",className:"dirButton",onClick:this.handleTravel},"\u21e7"),g.a.createElement("button",{id:"Xplus",className:"dirButton",onClick:this.handleTravel},"\u21e9"),g.a.createElement("button",{id:"Yplus",className:"dirButton",onClick:this.handleTravel},"\u21e8")),g.a.createElement(U,{mssg:this.state.mssg}))}}]),t}(g.a.Component),G=function(a){var t=a.meX,l=a.meY,u=a.posX,f=a.posY,i=a.thugP,r=a.potionP,S=a.weaponL;return Math.abs(t-u)<=8&&Math.abs(l-f)<=6?t===u&&l===f?g.a.createElement("div",{className:"units pos"}):"wall"===N[l][t].cellType?g.a.createElement("div",{className:"units brick"}):3===i?g.a.createElement("div",{className:"units boss"}):1===i?g.a.createElement("div",{className:"units thug"}):r?g.a.createElement("div",{className:"units potion"}):1===S?g.a.createElement("div",{className:"units weapon2"}):2===S?g.a.createElement("div",{className:"units weapon3"}):3===S?g.a.createElement("div",{className:"units weapon4"}):g.a.createElement("div",{className:"units visible"}):g.a.createElement("div",{className:"units"})},U=function(a){return a.mssg?g.a.createElement("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:170,margin:"auto",width:"200px",height:"88px",background:"rgb(255, 255, 255, 0.6)",display:"flex",alignItems:"center",justifyContent:"center"}},a.mssg?a.mssg:"I have nothing"):null},J=F,q=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function K(a,t){navigator.serviceWorker.register(a).then(function(a){a.onupdatefound=function(){var l=a.installing;null!=l&&(l.onstatechange=function(){"installed"===l.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(a)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(a)))})}}).catch(function(a){console.error("Error during service worker registration:",a)})}i.a.render(g.a.createElement(J,null),document.getElementById("root")),function(a){if("serviceWorker"in navigator){if(new URL("/Dungeon-Crawler",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/Dungeon-Crawler","/service-worker.js");q?(function(a,t){fetch(a).then(function(l){var u=l.headers.get("content-type");404===l.status||null!=u&&-1===u.indexOf("javascript")?navigator.serviceWorker.ready.then(function(a){a.unregister().then(function(){window.location.reload()})}):K(a,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,a),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):K(t,a)})}}()},9:function(a,t,l){a.exports=l(19)}},[[9,2,1]]]);
//# sourceMappingURL=main.c7dd53c4.chunk.js.map