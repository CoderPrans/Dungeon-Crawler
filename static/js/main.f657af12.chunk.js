(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(a,l,t){},17:function(a,l,t){},19:function(a,l,t){"use strict";t.r(l);for(var u=t(0),f=t.n(u),r=t(3),v=t.n(r),g=(t(15),t(4)),w=t(5),S=t(7),i=t(6),h=t(8),b=t(1),c=(t(17),function(){var a,l,t,u,f,r,v,g="W",w="E";function S(a,l,t){for(var u=l.col<t.col?1:-1,f=l.col;f!==t.col;f+=u)a[l.row][f]=w}function i(a,l,t){for(var u=l.row<t.row?1:-1,f=l.row;f!==t.row;f+=u)a[f][l.col]=w}function h(a,l,t){var u=Math.floor(2*Math.random());if(l.row>t.row&&l.col>t.col)if(u){for(var f=l.row-1;f>=t.row+t.h-1;f--)a[f][l.col]=w;for(f=l.col-1;f>=t.col+t.w;f--)a[t.row+t.h-1][f]=w}else{for(f=l.col-1;f>=t.col+t.w-1;f--)a[l.row][f]=w;for(f=l.row-1;f>=t.row+t.h;f--)a[f][t.col+t.w-1]=w}else{if(!(l.row>t.row&&l.col<t.col))return!1;if(u){for(f=l.row-1;f>=t.row+t.h-1;f--)a[f][l.col+l.w-1]=w;for(f=l.col+l.w;f<t.col;f++)a[t.row+t.h-1][f]=w}else{for(f=l.col+l.w;f<=t.col;f++)a[l.row][f]=w;for(f=l.row-1;f>=t.row+t.h;f--)a[f][t.col]=w}}return!0}function b(a,l,t){l.row>=t.row&&l.row<t.row+t.h?S(a,l,t):t.row>=l.row&&t.row<l.row+l.h?S(a,t,l):l.col>=t.col&&l.col<t.col+t.w?i(a,l,t):t.col>=l.col&&t.col<l.col+l.w?i(a,t,l):h(a,l,t)||h(a,t,l)}function c(a,l){return l===a?l:a+2*Math.floor(Math.random()*Math.floor((l-a)/2+1))}function O(r){var v=void 0,S=c(l,a),i=c(l,a),h={h:S,w:i,row:c(0,t-S-2*f)+f,col:c(0,u-i-2*f)+f};if(function(a,l){for(var t=!0,u=l.row-1;u<l.row+l.h+1;u++)for(var f=l.col-1;f<l.col+l.w+1;f++)if(a[u][f]!==g){t=!1;break}return t}(r,h)){for(var b=h.row;b<h.row+h.h;b++)for(var O=h.col;O<h.col+h.w;O++)r[b][O]=w;v=h}return v}var N={generate:function(w){var S=w||{};t=S.rows||31,u=S.cols||51,a=S.maxRoomSize||7,l=S.minRoomSize||3,f=S.padding||2,r=S.maxAttempts||500,v=S.rooms||15;for(var i=[],h=0;h<t;h++){for(var c=[],N=0;N<u;N++)c.push(g);i.push(c)}var B=[],j=[];for(h=0,c=0;h<r&&c<v;){var I=O(i);I&&(B.push(I),c++),h++}function C(a,l){var t=l.row-a.row^l.col-a.col+2^2;return Math.sqrt(t)}for(j.push(B.pop());B.length;){var x=j[j.length-1],R=B.sort(function(a,l){return C(x,a)<C(x,l)?1:C(x,a)>C(x,l)?-1:0}).pop();b(i,x,R),j.push(R),x=R}return i.map(function(a,l){return a.map(function(a,l){return{cellType:a===g?"wall":"empty"}})})}};return N}()),O=[{hp:50,attack:15},{hp:75,attack:45},{hp:100,attack:60},{hp:150,attack:80}],N=[["Fist",25],["Hammer",50],["Sword",80],["Fire",100]],B=c.generate({maxRoomSize:7,minRoomSize:5,padding:2,rooms:27,rows:50,cols:30}),j=new Array(50),I=new Array(50),C=!1,x=0,R=0;R<j.length;R++){j[R]=new Array(30).fill(0),I[R]=new Array(30).fill(0);for(var z=0;z<j[R].length;z++)R%2!==0&&Math.random()<.03&&"empty"===B[R][z].cellType?(j[R][z]=1,x++,R>28&&!C&&(j[R][z]=3,console.log(R,z),C=!0)):Math.random()<.005&&"empty"===B[R][z].cellType&&0===j[R][z]&&(I[R][z]=1)}for(var T=new Array(50),F=0;F<T.length;F++){T[F]=new Array(30).fill(0);for(var G=0;G<T[F].length;G++)Math.random()<.01&&0===j[F][G]&&0===I[F][G]&&(Math.random()<.3?T[F][G]=1:Math.random()<.2?T[F][G]=2:Math.random()<.1&&(T[F][G]=3))}console.log(j),console.log(B);var U=function(a){function l(a){var t;return Object(g.a)(this,l),(t=Object(S.a)(this,Object(i.a)(l).call(this,a))).state={posX:Math.round(30*Math.random()),posY:Math.round(50*Math.random()),hp:100,xp:25,positions:j,hpotions:I,weapons:T,enemyCount:x,enemyDir:null,enemyHp:null,enemyAttack:null,weaponLevel:0,enemyLevel:null,fightOn:!1,gameWon:!1},t.handleTravel=t.handleTravel.bind(Object(b.a)(Object(b.a)(t))),t.detectEnemy=t.detectEnemy.bind(Object(b.a)(Object(b.a)(t))),t.handleCombat=t.handleCombat.bind(Object(b.a)(Object(b.a)(t))),t}return Object(h.a)(l,a),Object(w.a)(l,[{key:"componentDidMount",value:function(){var a,l;document.addEventListener("keydown",function(a){a.preventDefault(),39===a.keyCode?document.getElementById("Yplus").click():40===a.keyCode?document.getElementById("Xplus").click():37===a.keyCode?document.getElementById("Yminus").click():38===a.keyCode&&document.getElementById("Xminus").click()}),this.setState({positions:j,hpotions:I});for(var t=0;t<30;t++)for(var u=0;u<50;u++)Math.random()<.2&&!a&&!l&&"empty"===B[u][t].cellType&&0===j[t][u]&&0===this.state.weapons[t][u]&&0===I[t][u]&&(a=t,l=u);this.setState({posX:a,posY:l,enemyCount:x})}},{key:"detectEnemy",value:function(a,l){var t=this.state.positions;return a+1<=49&&0!==t[a+1][l]?(3===t[a+1][l]&&alert("BOSSS FIGHT !!!!"),alert("Enemy detected!, right"),this.setState({fightOn:!0}),{enemyDir:"right",enemyLevel:t[a+1][l],enemyHp:O[t[a+1][l]].hp,enemyAttack:O[t[a+1][l]].attack}):l+1<=29&&0!==t[a][l+1]?(3===t[a][l+1]&&alert("BOSSS FIGHT !!!!"),alert("Enemy detected!, down"),this.setState({fightOn:!0}),{enemyDir:"down",enemyLevel:t[a][l+1],enemyHp:O[t[a][l+1]].hp,enemyAttack:O[t[a][l+1]].attack}):a-1>=0&&0!==t[a-1][l]?(3===t[a-1][l]&&alert("BOSSS FIGHT !!!!"),alert("Enemy detected!, left"),this.setState({fightOn:!0}),{enemyDir:"left",enemyLevel:t[a-1][l],enemyHp:O[t[a-1][l]].hp,enemyAttack:O[t[a-1][l]].attack}):l-1>=0&&0!==t[a][l-1]?(3===t[a][l-1]&&alert("BOSSS FIGHT !!!!"),alert("Enemy detected!, up"),this.setState({fightOn:!0}),{enemyDir:"up",enemyLevel:t[a][l-1],enemyHp:O[t[a][l-1]].hp,enemyAttack:O[t[a][l-1]].attack}):(console.log("from inside the detectEnemy",this.state.fightOn),"clear")}},{key:"handleTravel",value:function(a){a.preventDefault();var l=this.state,t=l.positions,u=l.hpotions,f=l.weapons;if(null!==this.state.enemyDir||this.state.gameWon||0===this.state.hp)this.handleCombat(a);else{var r=this.state,v=r.posX,g=r.posY;if("Yplus"===a.target.id){if(g<49&&"empty"===B[g+1][v].cellType&&0===t[g+1][v]){if("object"===typeof this.detectEnemy(g+1,v)){var w=this.detectEnemy(g+1,v),S=w.enemyDir,i=w.enemyLevel,h=w.enemyAttack,b=w.enemyHp;this.setState({enemyDir:S,enemyLevel:i,enemyAttack:h,enemyHp:b})}else this.setState({fightOn:!1});var c=this.state.hp;1===u[g+1][v]&&(this.setState({hp:c+=65}),alert("potion collected")),0!==f[g+1][v]&&(this.setState({weaponLevel:f[g+1][v]}),alert("picked a ".concat(N[f[g+1][v]][0])));var O=u.slice(0);O[g+1][v]=0;var j=f.slice(0);j[g+1][v]=0,this.setState({posY:g+1,hpotions:O,weapons:j})}}else if("Xplus"===a.target.id){if(v<29&&"empty"===B[g][v+1].cellType&&0===t[g][v+1]){if("object"===typeof this.detectEnemy(g,v+1)){var I=this.detectEnemy(g,v+1),C=I.enemyDir,x=I.enemyLevel,R=I.enemyAttack,z=I.enemyHp;this.setState({enemyDir:C,enemyLevel:x,enemyAttack:R,enemyHp:z})}else this.setState({fightOn:!1});var T=this.state.hp;1===u[g][v+1]&&(this.setState({hp:T+=65}),alert("potion collected")),0!==f[g][v+1]&&(this.setState({weaponLevel:f[g][v+1]}),alert("picked a ".concat(N[f[g][v+1]][0])));var F=u.slice(0);F[g][v+1]=0;var G=f.slice(0);G[g][v+1]=0,this.setState({posX:v+1,hpotions:F,weapons:G})}}else if("Yminus"===a.target.id){if(g>0&&"empty"===B[g-1][v].cellType&&0===t[g-1][v]){if("object"===typeof this.detectEnemy(g-1,v)){var U=this.detectEnemy(g-1,v),J=U.enemyDir,q=U.enemyLevel,K=U.enemyAttack,Q=U.enemyHp;this.setState({enemyDir:J,enemyLevel:q,enemyAttack:K,enemyHp:Q})}else this.setState({fightOn:!1});var V=this.state.hp;1===u[g-1][v]&&(this.setState({hp:V+=65}),alert("potion collected")),0!==f[g-1][v]&&(this.setState({weaponLevel:f[g-1][v]}),alert("picked a ".concat(N[f[g-1][v]][0])));var Z=u.slice(0);Z[g-1][v]=0;var W=f.slice(0);W[g-1][v]=0,this.setState({posY:g-1,hpotions:Z,weapons:W})}}else if(v>0&&"empty"===B[g][v-1].cellType&&0===t[g][v-1]){if("object"===typeof this.detectEnemy(g,v-1)){var n=this.detectEnemy(g,v-1),k=n.enemyDir,D=n.enemyLevel,s=n.enemyAttack,L=n.enemyHp;this.setState({enemyDir:k,enemyLevel:D,enemyAttack:s,enemyHp:L})}else this.setState({fightOn:!1});var M=this.state.hp;1===u[g][v-1]&&(this.setState({hp:M+=65}),alert("potion collected")),0!==f[g][v-1]&&(this.setState({weaponLevel:f[g][v-1]}),alert("picked a ".concat(N[f[g][v-1]][0])));var P=u.slice(0);P[g][v-1]=0;var o=f.slice(0);o[g][v-1]=0,this.setState({posX:v-1,hpotions:P,weapons:o})}}}},{key:"handleCombat",value:function(a){var l=this.state,t=l.hp,u=l.xp,f=l.enemyLevel,r=l.weaponLevel,v=l.enemyDir,g=l.enemyHp,w=l.enemyAttack,S=l.enemyCount,i=l.posY,h=l.posX,b=N[r][1];if("right"===v&&"Yplus"===a.target.id)if(t=t-w>=0?t-w:0,u+=5*f,0===(g=g-b>=0?g-b:0)){3===j[i+1][h]&&(alert("Boss EXTERMINATED !!!"),this.setState({gameWon:!0}));var c=this.state.positions.slice(0);c[i+1][h]=0,this.setState({positions:c,enemyCount:S-1}),this.setState({enemyDir:null,enemyHp:null,enemyAttack:null,enemyLevel:null})}else this.setState({enemyHp:g,hp:t,xp:u});else if("left"===v&&"Yminus"===a.target.id){if(t=t-w>=0?t-w:0,u+=5*f,0===(g=g-b>=0?g-b:0)){3===j[i-1][h]&&(alert("Boss EXTERMINATED !!!"),this.setState({gameWon:!0}));var O=this.state.positions.slice(0);O[i-1][h]=0,this.setState({positions:O,enemyCount:S-1}),this.setState({enemyDir:null,enemyHp:null,enemyAttack:null,enemyLevel:null})}this.setState({enemyHp:g,hp:t,xp:u})}else if("up"===v&&"Xminus"===a.target.id){if(t=t-w>=0?t-w:0,u+=5*f,0===(g=g-b>=0?g-b:0)){3===j[i][h-1]&&(alert("Boss EXTERMINATED !!!"),this.setState({gameWon:!0}));var B=this.state.positions.slice(0);B[i][h-1]=0,this.setState({positions:B,enemyCount:S-1}),this.setState({enemyDir:null,enemyHp:null,enemyAttack:null,enemyLevel:null})}this.setState({enemyHp:g,hp:t,xp:u})}else if("down"===v&&"Xplus"===a.target.id){if(t=t-w>=0?t-w:0,u+=5*f,0===(g=g-b>=0?g-b:0)){3===j[i][h+1]&&(alert("Boss EXTERMINATED !!!"),this.setState({gameWon:!0}));var I=this.state.positions.slice(0);I[i][h+1]=0,this.setState({positions:I,enemyCount:S-1}),this.setState({enemyDir:null,enemyHp:null,enemyAttack:null,enemyLevel:null})}this.setState({enemyHp:g,hp:t,xp:u})}}},{key:"render",value:function(){0===this.state.hp?alert("Game Over"):!0===this.state.gameWon&&alert("YOU WON !!!!!!");for(var a=this.state,l=a.posX,t=a.posY,u=a.positions,r=a.hpotions,v=a.weapons,g=[],w=0;w<30;w++)for(var S=0;S<50;S++){var i=u[S][w],h=r[S][w],b=v[S][w];g.push(f.a.createElement(J,{meX:w,meY:S,posX:l,posY:t,thugP:i,potionP:h,weaponL:b}))}return f.a.createElement("div",null,f.a.createElement("h1",{style:{color:"gainsboro",textAlign:"center",margin:"0",padding:"3px"}},"Dungeon Kings"),f.a.createElement("div",{className:"display-section"},f.a.createElement("div",{className:"statsbar"},f.a.createElement("span",null,f.a.createElement("span",{style:{fontSize:"13px"}},"HP"),this.state.hp),f.a.createElement("span",null,f.a.createElement("span",{style:{fontSize:"13px"}},"XP"),this.state.xp),f.a.createElement("span",null,f.a.createElement("span",{style:{fontSize:"13px"}},"Attack"),N[this.state.weaponLevel][1]),f.a.createElement("span",{style:{color:"coral",fontWeight:"bold",paddingTop:"30px"}},this.state.enemyCount)),f.a.createElement("div",{className:"actionbar"},this.state.enemyLevel?f.a.createElement("div",null,f.a.createElement("span",null,f.a.createElement("span",{style:{fontSize:"13px"}},"L"),this.state.enemyLevel),f.a.createElement("span",null,f.a.createElement("span",{style:{fontSize:"13px"}},"HP"),this.state.enemyHp," "),f.a.createElement("span",null,f.a.createElement("span",{style:{fontSize:"13px"}},"Attack"),this.state.enemyAttack," ")):null)),f.a.createElement("div",{className:"container-wrapper"},f.a.createElement("div",{className:"container",style:{position:"relative",right:"".concat(25*(this.state.posY-5),"px"),bottom:"".concat(25*(this.state.posX-5),"px")}},g)),f.a.createElement("div",{className:"navigation"},f.a.createElement("button",{id:"Yminus",className:"dirButton",onClick:this.handleTravel},"\u21e6"),f.a.createElement("button",{id:"Xminus",className:"dirButton",onClick:this.handleTravel},"\u21e7"),f.a.createElement("button",{id:"Xplus",className:"dirButton",onClick:this.handleTravel},"\u21e9"),f.a.createElement("button",{id:"Yplus",className:"dirButton",onClick:this.handleTravel},"\u21e8")))}}]),l}(f.a.Component),J=function(a){var l=a.meX,t=a.meY,u=a.posX,r=a.posY,v=a.thugP,g=a.potionP,w=a.weaponL;return Math.abs(l-u)<=10&&Math.abs(t-r)<=6?l===u&&t===r?f.a.createElement("div",{className:"units pos"}):"wall"===B[t][l].cellType?f.a.createElement("div",{className:"units brick"}):3===v?f.a.createElement("div",{className:"units boss"}):1===v?f.a.createElement("div",{className:"units thug"}):g?f.a.createElement("div",{className:"units potion"}):1===w?f.a.createElement("div",{className:"units weapon2"}):2===w?f.a.createElement("div",{className:"units weapon3"}):3===w?f.a.createElement("div",{className:"units weapon4"}):f.a.createElement("div",{className:"units visible"}):f.a.createElement("div",{className:"units"})},q=U,K=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Q(a,l){navigator.serviceWorker.register(a).then(function(a){a.onupdatefound=function(){var t=a.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),l&&l.onUpdate&&l.onUpdate(a)):(console.log("Content is cached for offline use."),l&&l.onSuccess&&l.onSuccess(a)))})}}).catch(function(a){console.error("Error during service worker registration:",a)})}v.a.render(f.a.createElement(q,null),document.getElementById("root")),function(a){if("serviceWorker"in navigator){if(new URL("/Dungeon-Crawler",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var l="".concat("/Dungeon-Crawler","/service-worker.js");K?(function(a,l){fetch(a).then(function(t){var u=t.headers.get("content-type");404===t.status||null!=u&&-1===u.indexOf("javascript")?navigator.serviceWorker.ready.then(function(a){a.unregister().then(function(){window.location.reload()})}):Q(a,l)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(l,a),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):Q(l,a)})}}()},9:function(a,l,t){a.exports=t(19)}},[[9,2,1]]]);
//# sourceMappingURL=main.f657af12.chunk.js.map