(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(u,f,g){},17:function(u,f,g){},19:function(u,f,g){"use strict";g.r(f);for(var S=g(0),b=g.n(S),O=g(3),N=g.n(O),j=(g(15),g(4)),C=g(5),B=g(7),I=g(6),z=g(8),R=g(1),F=(g(17),function(){var u,f,g,S,b,O,N,j="W",C="E";function B(u,f,g){for(var S=f.col<g.col?1:-1,b=f.col;b!==g.col;b+=S)u[f.row][b]=C}function I(u,f,g){for(var S=f.row<g.row?1:-1,b=f.row;b!==g.row;b+=S)u[b][f.col]=C}function z(u,f,g){var S=Math.floor(2*Math.random());if(f.row>g.row&&f.col>g.col)if(S){for(var b=f.row-1;b>=g.row+g.h-1;b--)u[b][f.col]=C;for(b=f.col-1;b>=g.col+g.w;b--)u[g.row+g.h-1][b]=C}else{for(b=f.col-1;b>=g.col+g.w-1;b--)u[f.row][b]=C;for(b=f.row-1;b>=g.row+g.h;b--)u[b][g.col+g.w-1]=C}else{if(!(f.row>g.row&&f.col<g.col))return!1;if(S){for(b=f.row-1;b>=g.row+g.h-1;b--)u[b][f.col+f.w-1]=C;for(b=f.col+f.w;b<g.col;b++)u[g.row+g.h-1][b]=C}else{for(b=f.col+f.w;b<=g.col;b++)u[f.row][b]=C;for(b=f.row-1;b>=g.row+g.h;b--)u[b][g.col]=C}}return!0}function R(u,f,g){f.row>=g.row&&f.row<g.row+g.h?B(u,f,g):g.row>=f.row&&g.row<f.row+f.h?B(u,g,f):f.col>=g.col&&f.col<g.col+g.w?I(u,f,g):g.col>=f.col&&g.col<f.col+f.w?I(u,g,f):z(u,f,g)||z(u,g,f)}function F(u,f){return f===u?f:u+2*Math.floor(Math.random()*Math.floor((f-u)/2+1))}function J(O){var N=void 0,B=F(f,u),I=F(f,u),z={h:B,w:I,row:F(0,g-B-2*b)+b,col:F(0,S-I-2*b)+b};if(function(u,f){for(var g=!0,S=f.row-1;S<f.row+f.h+1;S++)for(var b=f.col-1;b<f.col+f.w+1;b++)if(u[S][b]!==j){g=!1;break}return g}(O,z)){for(var R=z.row;R<z.row+z.h;R++)for(var J=z.col;J<z.col+z.w;J++)O[R][J]=C;N=z}return N}var q={generate:function(C){var B=C||{};g=B.rows||31,S=B.cols||51,u=B.maxRoomSize||7,f=B.minRoomSize||3,b=B.padding||2,O=B.maxAttempts||500,N=B.rooms||15;for(var I=[],z=0;z<g;z++){for(var F=[],q=0;q<S;q++)F.push(j);I.push(F)}var G=[],x=[];for(z=0,F=0;z<O&&F<N;){var K=J(I);K&&(G.push(K),F++),z++}function Q(u,f){var g=f.row-u.row^f.col-u.col+2^2;return Math.sqrt(g)}for(x.push(G.pop());G.length;){var U=x[x.length-1],V=G.sort(function(u,f){return Q(U,u)<Q(U,f)?1:Q(U,u)>Q(U,f)?-1:0}).pop();R(I,U,V),x.push(V),U=V}return I.map(function(u,f){return u.map(function(u,f){return{cellType:u===j?"wall":"empty"}})})}};return q}()),J=[{hp:50,attack:15},{hp:75,attack:45},{hp:100,attack:60},{hp:150,attack:80}],q=[["Fist",15],["Hammer",45],["Sword",60],["Fire",80]],G=F.generate({maxRoomSize:7,minRoomSize:7,padding:2,rooms:25,rows:50,cols:30}),x=new Array(50),K=new Array(50),Q=0;Q<x.length;Q++){x[Q]=new Array(30).fill(0),K[Q]=new Array(30).fill(0);for(var U=0;U<x[Q].length;U++)Math.random()<.01&&"empty"===G[Q][U].cellType?x[Q][U]=1:Math.random()<.005&&"empty"===G[Q][U].cellType&&0===x[Q][U]&&(K[Q][U]=1)}for(var V=new Array(50),Z=0;Z<V.length;Z++){V[Z]=new Array(30).fill(0);for(var T=0;T<V[Z].length;T++)Math.random()<.01&&0===x[Z][T]&&0===K[Z][T]&&(Math.random()<.4?V[Z][T]=1:Math.random()<.3?V[Z][T]=2:Math.random()<.2&&(V[Z][T]=3))}console.log(G);var a=function(u){function f(u){var g;return Object(j.a)(this,f),(g=Object(B.a)(this,Object(I.a)(f).call(this,u))).state={posX:Math.round(30*Math.random()),posY:Math.round(50*Math.random()),hp:100,xp:25,positions:x,hpotions:K,weapons:V,enemyDir:null,enemyHp:null,enemyAttack:null,weaponLevel:0,enemyLevel:null,fightOn:!1},g.handleTravel=g.handleTravel.bind(Object(R.a)(Object(R.a)(g))),g.detectEnemy=g.detectEnemy.bind(Object(R.a)(Object(R.a)(g))),g.handleCombat=g.handleCombat.bind(Object(R.a)(Object(R.a)(g))),g}return Object(z.a)(f,u),Object(C.a)(f,[{key:"componentDidMount",value:function(){var u,f;document.addEventListener("keydown",function(u){u.preventDefault(),39===u.keyCode?document.getElementById("Yplus").click():40===u.keyCode?document.getElementById("Xplus").click():37===u.keyCode?document.getElementById("Yminus").click():38===u.keyCode&&document.getElementById("Xminus").click()}),this.setState({positions:x,hpotions:K});for(var g=0;g<30;g++)for(var S=0;S<50;S++)Math.random()<.2&&!u&&!f&&"empty"===G[S][g].cellType&&0===x[g][S]&&0===this.state.weapons[g][S]&&0===K[g][S]&&(u=g,f=S);this.setState({posX:u,posY:f})}},{key:"detectEnemy",value:function(u,f){var g=this.state.positions;return u+1<=49&&1===g[u+1][f]?(alert("Enemy detected!, right"),this.setState({fightOn:!0}),{enemyDir:"right",enemyLevel:1,enemyHp:J[1].hp,enemyAttack:J[1].attack}):f+1<=29&&1===g[u][f+1]?(alert("Enemy detected!, down"),this.setState({fightOn:!0}),{enemyDir:"down",enemyLevel:1,enemyHp:J[1].hp,enemyAttack:J[1].attack}):u-1>=0&&1===g[u-1][f]?(alert("Enemy detected!, left"),this.setState({fightOn:!0}),{enemyDir:"left",enemyLevel:1,enemyHp:J[1].hp,enemyAttack:J[1].attack}):f-1>=0&&1===g[u][f-1]?(alert("Enemy detected!, up"),this.setState({fightOn:!0}),{enemyDir:"up",enemyLevel:1,enemyHp:J[1].hp,enemyAttack:J[1].attack}):(console.log("from inside the detectEnemy",this.state.fightOn),"clear")}},{key:"handleTravel",value:function(u){u.preventDefault();var f=this.state,g=f.positions,S=f.hpotions,b=f.weapons;if(null===this.state.enemyDir){var O=this.state,N=O.posX,j=O.posY;if("Yplus"===u.target.id){if(j<49&&"empty"===G[j+1][N].cellType&&1!==g[j+1][N]){if("object"===typeof this.detectEnemy(j+1,N)){var C=this.detectEnemy(j+1,N),B=C.enemyDir,I=C.enemyLevel,z=C.enemyAttack,R=C.enemyHp;this.setState({enemyDir:B,enemyLevel:I,enemyAttack:z,enemyHp:R})}else this.setState({fightOn:!1});var F=this.state.hp;1===S[j+1][N]&&(this.setState({hp:F+=65}),alert("potion collected")),0!==b[j+1][N]&&(this.setState({weaponLevel:b[j+1][N]}),alert("picked a ".concat(q[b[j+1][N]][0])));var J=S.slice(0);J[j+1][N]=0;var x=b.slice(0);x[j+1][N]=0,this.setState({posY:j+1,hpotions:J,weapons:x})}}else if("Xplus"===u.target.id){if(N<29&&"empty"===G[j][N+1].cellType&&1!==g[j][N+1]){if("object"===typeof this.detectEnemy(j,N+1)){var K=this.detectEnemy(j,N+1),Q=K.enemyDir,U=K.enemyLevel,V=K.enemyAttack,Z=K.enemyHp;this.setState({enemyDir:Q,enemyLevel:U,enemyAttack:V,enemyHp:Z})}else this.setState({fightOn:!1});var T=this.state.hp;1===S[j][N+1]&&(this.setState({hp:T+=65}),alert("potion collected")),0!==b[j][N+1]&&(this.setState({weaponLevel:b[j][N+1]}),alert("picked a ".concat(q[b[j][N+1]][0])));var a=S.slice(0);a[j][N+1]=0;var w=b.slice(0);w[j][N+1]=0,this.setState({posX:N+1,hpotions:a,weapons:w})}}else if("Yminus"===u.target.id){if(j>0&&"empty"===G[j-1][N].cellType&&1!==g[j-1][N]){if("object"===typeof this.detectEnemy(j-1,N)){var M=this.detectEnemy(j-1,N),v=M.enemyDir,W=M.enemyLevel,l=M.enemyAttack,P=M.enemyHp;this.setState({enemyDir:v,enemyLevel:W,enemyAttack:l,enemyHp:P})}else this.setState({fightOn:!1});var k=this.state.hp;1===S[j-1][N]&&(this.setState({hp:k+=65}),alert("potion collected")),0!==b[j-1][N]&&(this.setState({weaponLevel:b[j-1][N]}),alert("picked a ".concat(q[b[j-1][N]][0])));var L=S.slice(0);L[j-1][N]=0;var D=b.slice(0);D[j-1][N]=0,this.setState({posY:j-1,hpotions:L,weapons:D})}}else if(N>0&&"empty"===G[j][N-1].cellType&&1!==g[j][N-1]){if("object"===typeof this.detectEnemy(j,N-1)){var r=this.detectEnemy(j,N-1),A=r.enemyDir,H=r.enemyLevel,h=r.enemyAttack,X=r.enemyHp;this.setState({enemyDir:A,enemyLevel:H,enemyAttack:h,enemyHp:X})}else this.setState({fightOn:!1});var Y=this.state.hp;1===S[j][N-1]&&(this.setState({hp:Y+=65}),alert("potion collected")),0!==b[j][N-1]&&(this.setState({weaponLevel:b[j][N-1]}),alert("picked a ".concat(q[b[j][N-1]][0])));var E=S.slice(0);E[j][N-1]=0;var $=b.slice(0);$[j][N-1]=0,this.setState({posX:N-1,hpotions:E,weapons:$})}}else this.handleCombat(u)}},{key:"handleCombat",value:function(u){var f=this.state,g=f.hp,S=f.xp,b=f.enemyLevel,O=f.weaponLevel,N=f.enemyDir,j=f.enemyHp,C=f.enemyAttack,B=f.posY,I=f.posX,z=q[O][1];if("right"===N&&"Yplus"===u.target.id)if(g=g-C>=0?g-C:0,S+=5*b,0===(j=j-z>=0?j-z:0)){var R=this.state.positions.slice(0);R[B+1][I]=0,this.setState({positions:R}),this.setState({enemyDir:null,enemyHp:null,enemyAttack:null,enemyLevel:null})}else this.setState({enemyHp:j,hp:g,xp:S});else if("left"===N&&"Yminus"===u.target.id){if(g=g-C>=0?g-C:0,S+=5*b,0===(j=j-z>=0?j-z:0)){var F=this.state.positions.slice(0);F[B-1][I]=0,this.setState({positions:F}),this.setState({enemyDir:null,enemyHp:null,enemyAttack:null,enemyLevel:null})}this.setState({enemyHp:j,hp:g,xp:S})}else if("up"===N&&"Xminus"===u.target.id){if(g=g-C>=0?g-C:0,S+=5*b,0===(j=j-z>=0?j-z:0)){var J=this.state.positions.slice(0);J[B][I-1]=0,this.setState({positions:J}),this.setState({enemyDir:null,enemyHp:null,enemyAttack:null,enemyLevel:null})}this.setState({enemyHp:j,hp:g,xp:S})}else if("down"===N&&"Xplus"===u.target.id){if(g=g-C>=0?g-C:0,S+=5*b,0===(j=j-z>=0?j-z:0)){var G=this.state.positions.slice(0);G[B][I+1]=0,this.setState({positions:G}),this.setState({enemyDir:null,enemyHp:null,enemyAttack:null,enemyLevel:null})}this.setState({enemyHp:j,hp:g,xp:S})}}},{key:"render",value:function(){0===this.state.hp&&alert("Game Over");for(var u=this.state,f=u.posX,g=u.posY,S=u.positions,O=u.hpotions,N=u.weapons,j=[],C=0;C<30;C++)for(var B=0;B<50;B++){var I=S[B][C],z=O[B][C],R=N[B][C];j.push(b.a.createElement(w,{meX:C,meY:B,posX:f,posY:g,thugP:I,potionP:z,weaponL:R}))}return b.a.createElement("div",null,b.a.createElement("h1",{style:{color:"gainsboro",textAlign:"center"}},"Dungeon Crawler"),b.a.createElement("div",{className:"display-section"},b.a.createElement("div",{className:"statsbar"},b.a.createElement("span",null,"Hp: ",this.state.hp),b.a.createElement("span",null,"Xp: ",this.state.xp),b.a.createElement("span",null,"Weapon: ",q[this.state.weaponLevel][0])),b.a.createElement("div",{className:"actionbar"},this.state.enemyLevel?b.a.createElement("div",null,b.a.createElement("span",null," E level: ",this.state.enemyLevel),b.a.createElement("span",null," E hp: ",this.state.enemyHp," "),b.a.createElement("span",null," E attack: ",this.state.enemyAttack," ")):null)),b.a.createElement("div",{className:"container"},j),b.a.createElement("div",{className:"navigation"},b.a.createElement("button",{id:"Yminus",className:"dirButton",onClick:this.handleTravel},"\u21e6"),b.a.createElement("button",{id:"Xminus",className:"dirButton",onClick:this.handleTravel},"\u21e7"),b.a.createElement("button",{id:"Xplus",className:"dirButton",onClick:this.handleTravel},"\u21e9"),b.a.createElement("button",{id:"Yplus",className:"dirButton",onClick:this.handleTravel},"\u21e8")))}}]),f}(b.a.Component),w=function(u){var f=u.meX,g=u.meY,S=u.posX,O=u.posY,N=u.thugP,j=u.potionP,C=u.weaponL;return Math.abs(f-S)<=6&&Math.abs(g-O)<=6?f===S&&g===O?b.a.createElement("div",{className:"units pos"}):"wall"===G[g][f].cellType?b.a.createElement("div",{className:"units brick"}):N?b.a.createElement("div",{className:"units thug"}):j?b.a.createElement("div",{className:"units potion"}):1===C?b.a.createElement("div",{className:"units weapon2"}):2===C?b.a.createElement("div",{className:"units weapon3"}):3===C?b.a.createElement("div",{className:"units weapon4"}):b.a.createElement("div",{className:"units visible"}):b.a.createElement("div",{className:"units"})},M=a;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));N.a.render(b.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(u){u.unregister()})},9:function(u,f,g){u.exports=g(19)}},[[9,2,1]]]);
//# sourceMappingURL=main.673cbc98.chunk.js.map