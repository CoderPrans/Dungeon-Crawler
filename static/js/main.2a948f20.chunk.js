(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(a,l,u){},17:function(a,l,u){},19:function(a,l,u){"use strict";u.r(l);for(var t=u(0),f=u.n(t),v=u(3),S=u.n(v),g=(u(15),u(4)),w=u(5),b=u(7),h=u(6),O=u(8),r=u(1),N=(u(17),function(){var a,l,u,t,f,v,S,g="W",w="E";function b(a,l,u){for(var t=l.col<u.col?1:-1,f=l.col;f!==u.col;f+=t)a[l.row][f]=w}function h(a,l,u){for(var t=l.row<u.row?1:-1,f=l.row;f!==u.row;f+=t)a[f][l.col]=w}function O(a,l,u){var t=Math.floor(2*Math.random());if(l.row>u.row&&l.col>u.col)if(t){for(var f=l.row-1;f>=u.row+u.h-1;f--)a[f][l.col]=w;for(f=l.col-1;f>=u.col+u.w;f--)a[u.row+u.h-1][f]=w}else{for(f=l.col-1;f>=u.col+u.w-1;f--)a[l.row][f]=w;for(f=l.row-1;f>=u.row+u.h;f--)a[f][u.col+u.w-1]=w}else{if(!(l.row>u.row&&l.col<u.col))return!1;if(t){for(f=l.row-1;f>=u.row+u.h-1;f--)a[f][l.col+l.w-1]=w;for(f=l.col+l.w;f<u.col;f++)a[u.row+u.h-1][f]=w}else{for(f=l.col+l.w;f<=u.col;f++)a[l.row][f]=w;for(f=l.row-1;f>=u.row+u.h;f--)a[f][u.col]=w}}return!0}function r(a,l,u){l.row>=u.row&&l.row<u.row+u.h?b(a,l,u):u.row>=l.row&&u.row<l.row+l.h?b(a,u,l):l.col>=u.col&&l.col<u.col+u.w?h(a,l,u):u.col>=l.col&&u.col<l.col+l.w?h(a,u,l):O(a,l,u)||O(a,u,l)}function N(a,l){return l===a?l:a+2*Math.floor(Math.random()*Math.floor((l-a)/2+1))}function B(v){var S=void 0,b=N(l,a),h=N(l,a),O={h:b,w:h,row:N(0,u-b-2*f)+f,col:N(0,t-h-2*f)+f};if(function(a,l){for(var u=!0,t=l.row-1;t<l.row+l.h+1;t++)for(var f=l.col-1;f<l.col+l.w+1;f++)if(a[t][f]!==g){u=!1;break}return u}(v,O)){for(var r=O.row;r<O.row+O.h;r++)for(var B=O.col;B<O.col+O.w;B++)v[r][B]=w;S=O}return S}var j={generate:function(w){var b=w||{};u=b.rows||31,t=b.cols||51,a=b.maxRoomSize||7,l=b.minRoomSize||3,f=b.padding||2,v=b.maxAttempts||500,S=b.rooms||15;for(var h=[],O=0;O<u;O++){for(var N=[],j=0;j<t;j++)N.push(g);h.push(N)}var I=[],C=[];for(O=0,N=0;O<v&&N<S;){var R=B(h);R&&(I.push(R),N++),O++}function F(a,l){var u=l.row-a.row^l.col-a.col+2^2;return Math.sqrt(u)}for(C.push(I.pop());I.length;){var G=C[C.length-1],z=I.sort(function(a,l){return F(G,a)<F(G,l)?1:F(G,a)>F(G,l)?-1:0}).pop();r(h,G,z),C.push(z),G=z}return h.map(function(a,l){return a.map(function(a,l){return{cellType:a===g?"wall":"empty"}})})}};return j}()),B=[{hp:50,attack:15},{hp:75,attack:45},{hp:100,attack:60},{hp:150,attack:80}],j=[["Fist",25],["Hammer",50],["Sword",80],["Fire",100]],I=N.generate({maxRoomSize:7,minRoomSize:7,padding:2,rooms:25,rows:50,cols:30}),C=new Array(50),R=new Array(50),F=!1,G=0;G<C.length;G++){C[G]=new Array(30).fill(0),R[G]=new Array(30).fill(0);for(var z=0;z<C[G].length;z++)Math.random()<.01&&"empty"===I[G][z].cellType?(C[G][z]=1,F||(C[G][z]=3,console.log(G,z),F=!0)):Math.random()<.005&&"empty"===I[G][z].cellType&&0===C[G][z]&&(R[G][z]=1)}for(var T=new Array(50),J=0;J<T.length;J++){T[J]=new Array(30).fill(0);for(var q=0;q<T[J].length;q++)Math.random()<.01&&0===C[J][q]&&0===R[J][q]&&(Math.random()<.4?T[J][q]=1:Math.random()<.3?T[J][q]=2:Math.random()<.2&&(T[J][q]=3))}console.log(C),console.log(I);var U=function(a){function l(a){var u;return Object(g.a)(this,l),(u=Object(b.a)(this,Object(h.a)(l).call(this,a))).state={posX:Math.round(30*Math.random()),posY:Math.round(50*Math.random()),hp:100,xp:25,positions:C,hpotions:R,weapons:T,enemyDir:null,enemyHp:null,enemyAttack:null,weaponLevel:0,enemyLevel:null,fightOn:!1,gameWon:!1},u.handleTravel=u.handleTravel.bind(Object(r.a)(Object(r.a)(u))),u.detectEnemy=u.detectEnemy.bind(Object(r.a)(Object(r.a)(u))),u.handleCombat=u.handleCombat.bind(Object(r.a)(Object(r.a)(u))),u}return Object(O.a)(l,a),Object(w.a)(l,[{key:"componentDidMount",value:function(){var a,l;document.addEventListener("keydown",function(a){a.preventDefault(),39===a.keyCode?document.getElementById("Yplus").click():40===a.keyCode?document.getElementById("Xplus").click():37===a.keyCode?document.getElementById("Yminus").click():38===a.keyCode&&document.getElementById("Xminus").click()}),this.setState({positions:C,hpotions:R});for(var u=0;u<30;u++)for(var t=0;t<50;t++)Math.random()<.2&&!a&&!l&&"empty"===I[t][u].cellType&&0===C[u][t]&&0===this.state.weapons[u][t]&&0===R[u][t]&&(a=u,l=t);this.setState({posX:a,posY:l})}},{key:"detectEnemy",value:function(a,l){var u=this.state.positions;return a+1<=49&&0!==u[a+1][l]?(3===u[a+1][l]&&alert("BOSSS FIGHT !!!!"),alert("Enemy detected!, right"),this.setState({fightOn:!0}),{enemyDir:"right",enemyLevel:u[a+1][l],enemyHp:B[u[a+1][l]].hp,enemyAttack:B[u[a+1][l]].attack}):l+1<=29&&0!==u[a][l+1]?(3===u[a][l+1]&&alert("BOSSS FIGHT !!!!"),alert("Enemy detected!, down"),this.setState({fightOn:!0}),{enemyDir:"down",enemyLevel:u[a][l+1],enemyHp:B[u[a][l+1]].hp,enemyAttack:B[u[a][l+1]].attack}):a-1>=0&&0!==u[a-1][l]?(3===u[a-1][l]&&alert("BOSSS FIGHT !!!!"),alert("Enemy detected!, left"),this.setState({fightOn:!0}),{enemyDir:"left",enemyLevel:u[a-1][l],enemyHp:B[u[a-1][l]].hp,enemyAttack:B[u[a-1][l]].attack}):l-1>=0&&0!==u[a][l-1]?(3===u[a][l-1]&&alert("BOSSS FIGHT !!!!"),alert("Enemy detected!, up"),this.setState({fightOn:!0}),{enemyDir:"up",enemyLevel:u[a][l-1],enemyHp:B[u[a][l-1]].hp,enemyAttack:B[u[a][l-1]].attack}):(console.log("from inside the detectEnemy",this.state.fightOn),"clear")}},{key:"handleTravel",value:function(a){a.preventDefault();var l=this.state,u=l.positions,t=l.hpotions,f=l.weapons;if(null!==this.state.enemyDir||this.state.gameWon||0===this.state.hp)this.handleCombat(a);else{var v=this.state,S=v.posX,g=v.posY;if("Yplus"===a.target.id){if(g<49&&"empty"===I[g+1][S].cellType&&0===u[g+1][S]){if("object"===typeof this.detectEnemy(g+1,S)){var w=this.detectEnemy(g+1,S),b=w.enemyDir,h=w.enemyLevel,O=w.enemyAttack,r=w.enemyHp;this.setState({enemyDir:b,enemyLevel:h,enemyAttack:O,enemyHp:r})}else this.setState({fightOn:!1});var N=this.state.hp;1===t[g+1][S]&&(this.setState({hp:N+=65}),alert("potion collected")),0!==f[g+1][S]&&(this.setState({weaponLevel:f[g+1][S]}),alert("picked a ".concat(j[f[g+1][S]][0])));var B=t.slice(0);B[g+1][S]=0;var C=f.slice(0);C[g+1][S]=0,this.setState({posY:g+1,hpotions:B,weapons:C})}}else if("Xplus"===a.target.id){if(S<29&&"empty"===I[g][S+1].cellType&&0===u[g][S+1]){if("object"===typeof this.detectEnemy(g,S+1)){var R=this.detectEnemy(g,S+1),F=R.enemyDir,G=R.enemyLevel,z=R.enemyAttack,T=R.enemyHp;this.setState({enemyDir:F,enemyLevel:G,enemyAttack:z,enemyHp:T})}else this.setState({fightOn:!1});var J=this.state.hp;1===t[g][S+1]&&(this.setState({hp:J+=65}),alert("potion collected")),0!==f[g][S+1]&&(this.setState({weaponLevel:f[g][S+1]}),alert("picked a ".concat(j[f[g][S+1]][0])));var q=t.slice(0);q[g][S+1]=0;var U=f.slice(0);U[g][S+1]=0,this.setState({posX:S+1,hpotions:q,weapons:U})}}else if("Yminus"===a.target.id){if(g>0&&"empty"===I[g-1][S].cellType&&0===u[g-1][S]){if("object"===typeof this.detectEnemy(g-1,S)){var x=this.detectEnemy(g-1,S),K=x.enemyDir,Q=x.enemyLevel,V=x.enemyAttack,Z=x.enemyHp;this.setState({enemyDir:K,enemyLevel:Q,enemyAttack:V,enemyHp:Z})}else this.setState({fightOn:!1});var W=this.state.hp;1===t[g-1][S]&&(this.setState({hp:W+=65}),alert("potion collected")),0!==f[g-1][S]&&(this.setState({weaponLevel:f[g-1][S]}),alert("picked a ".concat(j[f[g-1][S]][0])));var i=t.slice(0);i[g-1][S]=0;var k=f.slice(0);k[g-1][S]=0,this.setState({posY:g-1,hpotions:i,weapons:k})}}else if(S>0&&"empty"===I[g][S-1].cellType&&0===u[g][S-1]){if("object"===typeof this.detectEnemy(g,S-1)){var D=this.detectEnemy(g,S-1),L=D.enemyDir,M=D.enemyLevel,c=D.enemyAttack,P=D.enemyHp;this.setState({enemyDir:L,enemyLevel:M,enemyAttack:c,enemyHp:P})}else this.setState({fightOn:!1});var H=this.state.hp;1===t[g][S-1]&&(this.setState({hp:H+=65}),alert("potion collected")),0!==f[g][S-1]&&(this.setState({weaponLevel:f[g][S-1]}),alert("picked a ".concat(j[f[g][S-1]][0])));var d=t.slice(0);d[g][S-1]=0;var X=f.slice(0);X[g][S-1]=0,this.setState({posX:S-1,hpotions:d,weapons:X})}}}},{key:"handleCombat",value:function(a){var l=this.state,u=l.hp,t=l.xp,f=l.enemyLevel,v=l.weaponLevel,S=l.enemyDir,g=l.enemyHp,w=l.enemyAttack,b=l.posY,h=l.posX,O=j[v][1];if("right"===S&&"Yplus"===a.target.id)if(u=u-w>=0?u-w:0,t+=5*f,0===(g=g-O>=0?g-O:0)){3===C[b+1][h]&&(alert("Boss EXTERMINATED !!!"),this.setState({gameWon:!0}));var r=this.state.positions.slice(0);r[b+1][h]=0,this.setState({positions:r}),this.setState({enemyDir:null,enemyHp:null,enemyAttack:null,enemyLevel:null})}else this.setState({enemyHp:g,hp:u,xp:t});else if("left"===S&&"Yminus"===a.target.id){if(u=u-w>=0?u-w:0,t+=5*f,0===(g=g-O>=0?g-O:0)){3===C[b-1][h]&&(alert("Boss EXTERMINATED !!!"),this.setState({gameWon:!0}));var N=this.state.positions.slice(0);N[b-1][h]=0,this.setState({positions:N}),this.setState({enemyDir:null,enemyHp:null,enemyAttack:null,enemyLevel:null})}this.setState({enemyHp:g,hp:u,xp:t})}else if("up"===S&&"Xminus"===a.target.id){if(u=u-w>=0?u-w:0,t+=5*f,0===(g=g-O>=0?g-O:0)){3===C[b][h-1]&&(alert("Boss EXTERMINATED !!!"),this.setState({gameWon:!0}));var B=this.state.positions.slice(0);B[b][h-1]=0,this.setState({positions:B}),this.setState({enemyDir:null,enemyHp:null,enemyAttack:null,enemyLevel:null})}this.setState({enemyHp:g,hp:u,xp:t})}else if("down"===S&&"Xplus"===a.target.id){if(u=u-w>=0?u-w:0,t+=5*f,0===(g=g-O>=0?g-O:0)){3===C[b][h+1]&&(alert("Boss EXTERMINATED !!!"),this.setState({gameWon:!0}));var I=this.state.positions.slice(0);I[b][h+1]=0,this.setState({positions:I}),this.setState({enemyDir:null,enemyHp:null,enemyAttack:null,enemyLevel:null})}this.setState({enemyHp:g,hp:u,xp:t})}}},{key:"render",value:function(){0===this.state.hp?alert("Game Over"):!0===this.state.gameWon&&alert("YOU WON !!!!!!");for(var a=this.state,l=a.posX,u=a.posY,t=a.positions,v=a.hpotions,S=a.weapons,g=[],w=0;w<30;w++)for(var b=0;b<50;b++){var h=t[b][w],O=v[b][w],r=S[b][w];g.push(f.a.createElement(x,{meX:w,meY:b,posX:l,posY:u,thugP:h,potionP:O,weaponL:r}))}return f.a.createElement("div",null,f.a.createElement("h1",{style:{color:"gainsboro",textAlign:"center"}},"Dungeon Crawler"),f.a.createElement("div",{className:"display-section"},f.a.createElement("div",{className:"statsbar"},f.a.createElement("span",null,"Hp: ",this.state.hp),f.a.createElement("span",null,"Xp: ",this.state.xp),f.a.createElement("span",null,"Attack: ",j[this.state.weaponLevel][1])),f.a.createElement("div",{className:"actionbar"},this.state.enemyLevel?f.a.createElement("div",null,f.a.createElement("span",null," E level: ",this.state.enemyLevel),f.a.createElement("span",null," E hp: ",this.state.enemyHp," "),f.a.createElement("span",null," E attack: ",this.state.enemyAttack," ")):null)),f.a.createElement("div",{className:"container"},g),f.a.createElement("div",{className:"navigation"},f.a.createElement("button",{id:"Yminus",className:"dirButton",onClick:this.handleTravel},"\u21e6"),f.a.createElement("button",{id:"Xminus",className:"dirButton",onClick:this.handleTravel},"\u21e7"),f.a.createElement("button",{id:"Xplus",className:"dirButton",onClick:this.handleTravel},"\u21e9"),f.a.createElement("button",{id:"Yplus",className:"dirButton",onClick:this.handleTravel},"\u21e8")))}}]),l}(f.a.Component),x=function(a){var l=a.meX,u=a.meY,t=a.posX,v=a.posY,S=a.thugP,g=a.potionP,w=a.weaponL;return Math.abs(l-t)<=6&&Math.abs(u-v)<=6?l===t&&u===v?f.a.createElement("div",{className:"units pos"}):"wall"===I[u][l].cellType?f.a.createElement("div",{className:"units brick"}):3===S?f.a.createElement("div",{className:"units boss"}):1===S?f.a.createElement("div",{className:"units thug"}):g?f.a.createElement("div",{className:"units potion"}):1===w?f.a.createElement("div",{className:"units weapon2"}):2===w?f.a.createElement("div",{className:"units weapon3"}):3===w?f.a.createElement("div",{className:"units weapon4"}):f.a.createElement("div",{className:"units visible"}):f.a.createElement("div",{className:"units"})},K=U;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));S.a.render(f.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(a){a.unregister()})},9:function(a,l,u){a.exports=u(19)}},[[9,2,1]]]);
//# sourceMappingURL=main.2a948f20.chunk.js.map