(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,function(e,t,n){e.exports=n.p+"static/media/footsteps.687d7054.mp3"},,,function(e,t,n){e.exports=n.p+"static/media/picked.2902508d.mp3"},,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/hp.712a1734.png"},function(e,t,n){e.exports=n.p+"static/media/hammer.e82ef265.png"},function(e,t,n){e.exports=n.p+"static/media/fire.99f6a8e2.png"},function(e,t,n){e.exports=n.p+"static/media/sword.2317bce5.png"},function(e,t,n){e.exports=n.p+"static/media/punch-blast.6b4a7786.png"},function(e,t,n){e.exports=n.p+"static/media/enemy.b07bdeeb.png"},function(e,t,n){e.exports=n.p+"static/media/hero.cb45efca.png"},function(e,t,n){e.exports=n.p+"static/media/fight-begin.e6dfff77.mp3"},function(e,t,n){e.exports=n.p+"static/media/dying.4849f499.mp3"},,,,function(e,t,n){e.exports=n(48)},,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(3),c=n.n(s),l=n(5),i=n(13),r=(n(44),n(26)),u=n(14),h=n(15),p=n(27),m=n(16),d=n(28),f=n(2),w=(n(46),function(){var e,t,n,a,o,s,c,l="W",i="E";function r(e,t,n){for(var a=t.col<n.col?1:-1,o=t.col;o!==n.col;o+=a)e[t.row][o]=i}function u(e,t,n){for(var a=t.row<n.row?1:-1,o=t.row;o!==n.row;o+=a)e[o][t.col]=i}function h(e,t,n){var a=Math.floor(2*Math.random());if(t.row>n.row&&t.col>n.col)if(a){for(var o=t.row-1;o>=n.row+n.h-1;o--)e[o][t.col]=i;for(o=t.col-1;o>=n.col+n.w;o--)e[n.row+n.h-1][o]=i}else{for(o=t.col-1;o>=n.col+n.w-1;o--)e[t.row][o]=i;for(o=t.row-1;o>=n.row+n.h;o--)e[o][n.col+n.w-1]=i}else{if(!(t.row>n.row&&t.col<n.col))return!1;if(a){for(o=t.row-1;o>=n.row+n.h-1;o--)e[o][t.col+t.w-1]=i;for(o=t.col+t.w;o<n.col;o++)e[n.row+n.h-1][o]=i}else{for(o=t.col+t.w;o<=n.col;o++)e[t.row][o]=i;for(o=t.row-1;o>=n.row+n.h;o--)e[o][n.col]=i}}return!0}function p(e,t,n){t.row>=n.row&&t.row<n.row+n.h?r(e,t,n):n.row>=t.row&&n.row<t.row+t.h?r(e,n,t):t.col>=n.col&&t.col<n.col+n.w?u(e,t,n):n.col>=t.col&&n.col<t.col+t.w?u(e,n,t):h(e,t,n)||h(e,n,t)}function m(e,t){return t===e?t:e+2*Math.floor(Math.random()*Math.floor((t-e)/2+1))}function d(s){var c=void 0,r=m(t,e),u=m(t,e),h={h:r,w:u,row:m(0,n-r-2*o)+o,col:m(0,a-u-2*o)+o};if(function(e,t){for(var n=!0,a=t.row-1;a<t.row+t.h+1;a++)for(var o=t.col-1;o<t.col+t.w+1;o++)if(e[a][o]!==l){n=!1;break}return n}(s,h)){for(var p=h.row;p<h.row+h.h;p++)for(var d=h.col;d<h.col+h.w;d++)s[p][d]=i;c=h}return c}var f={generate:function(i){var r=i||{};n=r.rows||31,a=r.cols||51,e=r.maxRoomSize||7,t=r.minRoomSize||3,o=r.padding||2,s=r.maxAttempts||500,c=r.rooms||15;for(var u=[],h=0;h<n;h++){for(var m=[],f=0;f<a;f++)m.push(l);u.push(m)}var w=[],g=[];for(h=0,m=0;h<s&&m<c;){var v=d(u);v&&(w.push(v),m++),h++}function y(e,t){var n=t.row-e.row^t.col-e.col+2^2;return Math.sqrt(n)}for(g.push(w.pop());w.length;){var b=g[g.length-1],k=w.sort(function(e,t){return y(b,e)<y(b,t)?1:y(b,e)>y(b,t)?-1:0}).pop();p(u,b,k),g.push(k),b=k}return u.map(function(e,t){return e.map(function(e,t){return{cellType:e===l?"wall":"empty"}})})}};return f}()),g=[{hp:100,attack:45},{hp:100,attack:75},{hp:100,attack:90},{hp:100,attack:100}],v=[["Punch",45],["Hammer",65],["Sword",80],["Fire",100]],y=w.generate({maxRoomSize:7,minRoomSize:5,padding:2,rooms:27,rows:50,cols:30}),b=new Array(50).fill().map(function(e){return new Array(30).fill(0)}),k=0;b.forEach(function(e,t){e.forEach(function(e,n){var a=Math.random();b[t][n]="empty"===y[t][n].cellType&&t%1.2!==0&&n%2===0?a>.01&&a<.03?(k+=1,!0?"thug":"boss"):a>.006&&a<.01?"pot":a>.001&&a<.003?"w1":a>.003&&a<.005?"w2":a>.005&&a<.0059?"w3":"empty":y[t][n].cellType})}),console.log(b,k);var x=n(17),S=n.n(x),E=n(18),O=n.n(E),C=n(19),j=n.n(C),N=n(20),X=n.n(N),A=n(21),L=n.n(A),W=n(22),D=n.n(W),R=n(23),H=n.n(R),B=function(e){var t,n=e.hp,a=e.xp,s=e.weaponLevel,c=(e.enemyLevel,e.enemyHp),l=(e.enemyAttack,e.thugCount);return o.a.createElement("div",{className:"display-section"},o.a.createElement("div",{className:"statsbar"},o.a.createElement("span",null,o.a.createElement("img",{alt:"health-icon",src:S.a}),n),o.a.createElement("span",null,o.a.createElement("img",{alt:"xp-icon",src:H.a}),a),o.a.createElement("span",null,o.a.createElement("img",{alt:"weapon-icon",src:(t=s,0===t?L.a:1===t?O.a:2===t?X.a:j.a)}),v[s][1])),o.a.createElement("div",{className:"actionbar"},o.a.createElement("span",{style:{color:"red",fontWeight:"bold",margin:"0 10px"}},l,o.a.createElement("img",{alt:"weapon-icon",src:D.a}),c),o.a.createElement("div",{style:{width:"220px",overflow:"hidden"}},o.a.createElement("p",{style:{width:"".concat(n,"%"),background:"lightgreen",height:"25px",margin:"5px"}}),o.a.createElement("p",{style:{width:"".concat(c||0,"%"),background:"orangered",height:"25px",margin:"5px"}}))))},F=function(e){return e.mssg?o.a.createElement("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:270,margin:"auto",width:"200px",height:"88px",background:"rgb(255, 255, 255, 0.6)",display:"flex",alignItems:"center",justifyContent:"center"}},e.mssg?e.mssg:"I have nothing"):null},I=function(e){var t=e.meX,n=e.meY,a=e.posX,s=e.posY,c=e.presence;return t===a&&n===s?o.a.createElement("div",{className:"units pos"}):"wall"===c?o.a.createElement("div",{className:"units brick"}):"boss"===c?o.a.createElement("div",{className:"units boss"}):"thug"===c?o.a.createElement("div",{className:"units thug"}):"pot"===c?o.a.createElement("div",{className:"units potion"}):"w1"===c?o.a.createElement("div",{className:"units weapon2"}):"w2"===c?o.a.createElement("div",{className:"units weapon3"}):"w3"===c?o.a.createElement("div",{className:"units weapon4"}):o.a.createElement("div",{className:"units visible"})},U=function(e){return o.a.createElement("div",{className:"navigation"},o.a.createElement("button",{id:"Yminus",className:"dirButton fa fa-arrow-circle-left",onClick:e.handleTravel}),o.a.createElement("button",{id:"Xminus",className:"dirButton fa fa-arrow-circle-up",onClick:e.handleTravel}),o.a.createElement("button",{id:"Xplus",className:"dirButton fa fa-arrow-circle-down",onClick:e.handleTravel}),o.a.createElement("button",{id:"Yplus",className:"dirButton fa fa-arrow-circle-right",onClick:e.handleTravel}))},z=function(e){var t=e.res;return o.a.createElement("div",{style:{height:"100vh",background:"#232323",width:"100vw",display:"flex",justifyContent:"center",alignItems:"center"}},o.a.createElement("div",{style:{width:"250px",border:"4px solid #211",padding:"20px",background:"#eff",textAlign:"center"}},o.a.createElement("h3",null,"Game Over"),o.a.createElement("h1",null,t),o.a.createElement("button",{className:"restart-button",onClick:function(){return window.location.reload()}},"Restart")))},q=n(24),J=n.n(q),K=n(25),G=n.n(K),$=n(4),_=n.n($),Q=n(7),V=n.n(Q),Z=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={posX:Math.round(30*Math.random()),posY:Math.round(50*Math.random()),hp:100,xp:25,presence:b,thugCount:k,enemyDir:null,enemyHp:null,enemyAttack:null,weaponLevel:0,enemyLevel:null,fightOn:!1,gameWon:!1,mssg:null,soundPlaying:!1},n.handleTravel=n.handleTravel.bind(Object(f.a)(Object(f.a)(n))),n.checkFor=n.checkFor.bind(Object(f.a)(Object(f.a)(n))),n.handleCombat=n.handleCombat.bind(Object(f.a)(Object(f.a)(n))),n.emptyPresence=n.emptyPresence.bind(Object(f.a)(Object(f.a)(n))),n.attact=n.attack.bind(Object(f.a)(Object(f.a)(n))),n.updatePositions=n.updatePositions.bind(Object(f.a)(Object(f.a)(n))),n.playSound=n.playSound.bind(Object(f.a)(Object(f.a)(n))),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){function e(e){document.querySelector("#".concat(e))&&document.querySelector("#".concat(e)).click()}var t,n;document.addEventListener("keydown",function(t){return 39===t.keyCode?e("Yplus"):40===t.keyCode?e("Xplus"):37===t.keyCode?e("Yminus"):38===t.keyCode?e("Xminus"):null}),b.forEach(function(e,a){return e.forEach(function(e,o){return!(Math.random()<.02)||t&&n||"empty"!==b[a][o]?null:(t=o,n=a)})}),this.setState({posX:t,posY:n,thugCount:k}),console.log(this.state.presence)}},{key:"playSound",value:function(e){new Audio(e).play()}},{key:"checkFor",value:function(e,t,n){var a=this.state.presence;return a[e+1][t]===n?{dir:"right"}:a[e][t+1]===n?{dir:"down"}:a[e-1][t]===n?{dir:"left"}:a[e][t-1]===n?{dir:"up"}:"clear"}},{key:"emptyPresence",value:function(e,t){var n=b.slice(0);n[e][t]="empty",this.setState({presence:n})}},{key:"updatePositions",value:function(e,t){var n=this.state.presence[e][t];if("object"===typeof this.checkFor(e,t,"thug")){var a={enemyLevel:1,enemyHp:g[1].hp,enemyAttack:g[1].attack},o=this.checkFor(e,t,"thug").dir;this.setState({mssg:"LOOK OUT! Enemy ".concat(o)}),this.setState({fightOn:!0}),this.setState(Object(r.a)({enemyDir:o},a))}else this.setState({fightOn:!1});var s=this.state.hp;"pot"===n?(this.setState({hp:s+=65}),this.setState({mssg:"potion collected"}),this.playSound(V.a),this.emptyPresence(e,t)):"w"===n[0]&&"wall"!==n&&(this.setState({weaponLevel:parseInt(n[1])}),this.playSound(V.a),this.setState({mssg:"picked a ".concat(v[parseInt(n[1])][0])}),this.emptyPresence(e,t))}},{key:"handleTravel",value:function(e){function t(e,t){return"thug"!==b[e][t]&&"boss"!==b[e][t]&&"wall"!==b[e][t]}if(e.preventDefault(),null!==this.state.enemyDir||this.state.gameWon||0===this.state.hp)this.handleCombat(e);else{var n=this.state,a=n.posX,o=n.posY;"Yplus"===e.target.id&&o<49&&t(o+1,a)?(this.playSound(_.a),this.updatePositions(o+1,a),this.setState({posY:o+1})):"Xplus"===e.target.id&&a<29&&t(o,a+1)?(this.playSound(_.a),this.updatePositions(o+1,a),this.updatePositions(o,a+1),this.setState({posX:a+1})):"Yminus"===e.target.id&&o>0&&t(o-1,a)?(this.playSound(_.a),this.updatePositions(o+1,a),this.updatePositions(o-1,a),this.setState({posY:o-1})):"Xminus"===e.target.id&&a>0&&t(o,a-1)&&(this.playSound(_.a),this.updatePositions(o+1,a),this.updatePositions(o,a-1),this.setState({posX:a-1}))}}},{key:"attack",value:function(e,t){this.playSound(J.a);var n=this.state,a=n.hp,o=n.xp,s=n.enemyLevel,c=n.weaponLevel,l=n.enemyHp,i=n.enemyAttack,r=n.thugCount,u=v[c][1];a=a-i>=0?a-i:0,o+=5*s,0===(l=l-u>=0?l-u:0)?(this.emptyPresence(e,t),this.setState({thugCount:r-1}),this.setState({enemyDir:null,enemyHp:null,enemyAttack:null,enemyLevel:null})):this.setState({enemyHp:l,hp:a,xp:o})}},{key:"handleCombat",value:function(e){var t=this.state,n=t.enemyDir,a=t.posY,o=t.posX;"right"===n&&"Yplus"===e.target.id?this.attack(a+1,o):"left"===n&&"Yminus"===e.target.id?this.attack(a-1,o):"up"===n&&"Xminus"===e.target.id?this.attack(a,o-1):"down"===n&&"Xplus"===e.target.id&&this.attack(a,o+1)}},{key:"render",value:function(){var e=this;if(0===this.state.hp)return this.playSound(G.a),o.a.createElement(z,{res:"You Lost !!"});if(0===this.state.thugCount)return o.a.createElement(z,{res:"YOU WON !!!!!"});for(var t=this.state,n=t.posX,a=t.posY,s=[],c=0;c<30;c++)for(var l=0;l<50;l++)s.push(o.a.createElement(I,{meX:c,meY:l,posX:n,posY:a,presence:this.state.presence[l][c]}));return this.state.mssg&&setTimeout(function(){return e.setState({mssg:null})},1500),o.a.createElement("div",null,o.a.createElement("h1",{style:{color:"gainsboro",textAlign:"center",padding:"3px"}},"Dungeon Kings"),o.a.createElement(B,this.state),o.a.createElement("div",{className:"container-wrapper"},o.a.createElement("div",{className:"container",style:{position:"relative",right:"".concat(30*(this.state.posY-5),"px"),bottom:"".concat(30*(this.state.posX-5),"px")}},s)),o.a.createElement(U,{handleTravel:this.handleTravel}),o.a.createElement(F,{mssg:this.state.mssg}))}}]),t}(o.a.Component),Y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function P(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var T={timeout:3e3,position:l.b.TOP_CENTER};c.a.render(o.a.createElement(function(){return o.a.createElement(l.a,Object.assign({template:i.a},T),o.a.createElement(Z,null))},null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/Dungeon-Crawler",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/Dungeon-Crawler","/service-worker.js");Y?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):P(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):P(t,e)})}}()}],[[29,2,1]]]);
//# sourceMappingURL=main.7a0ac0d2.chunk.js.map